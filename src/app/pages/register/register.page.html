<ion-content [fullscreen]="true">
  <!-- Decorative images -->
  <ion-img src="assets/corner-lines.png" class="corner-top"></ion-img>
  <ion-img src="assets/corner-lines.png" class="corner-bottom"></ion-img>
  <div class="center-horizontal main-container">
    <ion-img src="assets/logo.png" alt="Logo Mi Calendario" class="logo"></ion-img>
    <ion-text class="text">
      <h6>Para iniciar, introduce un email válido y un PIN</h6>
    </ion-text>

    <!-- Form to save the user data -->
    <form [formGroup]="userData">
      <ion-input placeholder="example@example.com" type="email" formControlName="email" errorText="Email inválido" email style="color: #000;"></ion-input>
      <ion-input placeholder="PIN" type="password" maxlength="4" formControlName="pin" errorText="PIN inválido" pattern="[0-9]*" style="color: #000;"></ion-input>
  <ion-checkbox labelPlacement="end" class="check" formControlName="noPin">Continuar sin PIN</ion-checkbox>
    </form>

    <!-- Buttons to start -->
    <div class="center-space-bw">
      <ion-button expand="full" class="button" shape="round" (click)="login()" style="margin-top: 15px;" [disabled]="!isValidForm()">Iniciar</ion-button>
      <div>
        <ion-button expand="full" class="button-white" shape="round" (click)="openModalRegister()" style="border: 1px solid #000;">Registrarme</ion-button>
      </div>
    </div>
  </div>
</ion-content>

<div class="spinner-container" *ngIf="isLoading">
  <ion-spinner name="bubbles" color="primary" style="height: 80px; width: 80px;"></ion-spinner>
</div>

<script>
  const pinInput = document.querySelector('ion-input[formControlName="pin"]');

  pinInput.addEventListener('input', function (e) {
    const inputValue = e.target.value;
    // Replaces any character that is not a number with an empty string
    e.target.value = inputValue.replace(/[^0-9]/g, '');
  });
</script>

<style>
  /* Prevent input field from displaying letters */
  ion-input[formControlName="pin"] input[type="text"] {
    -webkit-text-security: disc; /* iOS specific styling */
    text-security: disc; /* Standard styling for other browsers */
  }
</style>
